id: migrate_cuidarnos_images
label: 'Custom images migration for the previously imported posts'
constants:
  file_destination: 'public://images/cuidarnos/'
source:
  plugin: url
  data_fetcher_plugin: file
  data_parser_plugin: simple_xml
  urls:
    - 'modules/custom/royal_migrate/sources/cuidarnos.wordpress.2020-06-03.xml'
  # An xpath-like selector corresponding to the items to be imported.
  item_selector: /rss/channel/item

  ids:
    field_wp_post_id:
      type: integer

  fields:
    -
      name: field_wp_post_id
      label: 'WP Identificator'
      selector: wp:post_id

    -
      name: post_parent
      label: 'Parent entity WP Identificator'
      selector: wp:post_parent

    -
      name: title
      label: 'Common title'
      selector: title

    -
      name: file
      label: 'URL to get the file'
      selector: wp:attachment_url

    -
      name: post_type
      label: 'WP Post Type'
      selector: wp:post_type


process:
  title:
    plugin: cuidarnos_manage_image
    source: file
  # nid: post_parent
  # title: title
  # field_image:
  #   plugin: image_import
  #   source: file
  #   destination: 'constants/file_destination'
  #   title: file_title
  #   alt: file_title
destination:
  plugin: noop
  # default_bundle: magazine
# migration_dependencies:
#   required:
#     - migrate_cuidarnos
